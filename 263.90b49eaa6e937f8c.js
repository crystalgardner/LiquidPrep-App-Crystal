"use strict";(self.webpackChunkliquid_prep_app=self.webpackChunkliquid_prep_app||[]).push([[263],{1263:(D,h,n)=>{n.r(h),n.d(h,{SelectCropModule:()=>Y});var d=n(6362),v=n(3129),f=n(4558),S=n(4350),M=n(4858),t=n(3184),b=n(5281),y=n(4406),C=n(1571),T=n(2955),P=n(8159),p=n(3081),m=n(4362),L=n(477),g=n(587),x=n(3357),u=n(4005);const O=["searchbar"];function Z(o,c){1&o&&(t.TgZ(0,"div",7)(1,"div"),t._UZ(2,"mat-spinner",8),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Loading..."),t.qZA()())}function _(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"mat-grid-tile")(1,"mat-card",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(3).addCrop(l)}),t._UZ(2,"img",21),t.TgZ(3,"mat-card-footer")(4,"mat-card-title",22),t._uU(5),t.qZA()()()()}if(2&o){const e=c.$implicit;t.xp6(2),t.s9C("src",e.url,t.LSH),t.s9C("alt",e.cropName),t.xp6(3),t.Oqu(e.cropName)}}function N(o,c){if(1&o&&(t.TgZ(0,"div",17)(1,"mat-grid-list",18),t.YNc(2,_,6,3,"mat-grid-tile",19),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.filterFunction())}}function F(o,c){if(1&o&&(t.TgZ(0,"div")(1,"mat-card"),t._UZ(2,"img",23),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.s9C("src",e.NO_NEW_CROPS,t.LSH)}}function k(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"mat-toolbar",10)(2,"mat-toolbar-row",11)(3,"button",12)(4,"mat-icon"),t._uU(5,"search"),t.qZA()(),t.TgZ(6,"input",13),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().searchText=i}),t.qZA(),t.TgZ(7,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().searchClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()()(),t.YNc(10,N,3,1,"div",15),t.YNc(11,F,3,1,"div",16),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.ekj("active",e.toggleSearch),t.xp6(5),t.Q6J("ngModel",e.searchText),t.xp6(4),t.Q6J("ngIf",e.cropsList),t.xp6(1),t.Q6J("ngIf",!e.cropsList||0===e.cropsList.length)}}const A=[{path:"",component:(()=>{class o{constructor(e,r,i,l){this.router=e,this.location=r,this.cropService=i,this.headerService=l,this.searchText="",this.headerConfig={headerTitle:"Add a new crop",leftIconName:"close",rightIconName:"search",leftBtnClick:this.handleLeftClick.bind(this),rightBtnClick:null},this.toggleSearch=!1,this.NO_NEW_CROPS="../../assets/crops-images/noNewCrops.PNG",this.requestingCrop=!0,this.renderedHeadings=new Set}isAlreadyRendered(e){return!!this.renderedHeadings.has(e)||(this.renderedHeadings.add(e),!1)}ngOnInit(){this.headerService.updateHeader(this.headerConfig),this.requestingCrop=!0,(0,S.D)({cropsListData:this.cropService.getCropListFromApi(),myCrops:(0,M.D)(this.cropService.getLocalStorageMyCrops())}).subscribe(e=>{const i=e.myCrops;this.cropsList=e.cropsListData.filter(l=>!i.some(a=>a.id===l.id)),console.log("select cropsList:",this.cropsList),this.requestingCrop=!1},e=>{alert("Could not get crop list: "+e),this.requestingCrop=!1})}backClicked(){this.location.back()}onHeaderClick(e){"leftBtn"==e&&this.backClicked()}handleLeftClick(){this.backToMyCrops()}backToMyCrops(){this.location.back()}openSearch(){this.toggleSearch=!0,this.searchbar.nativeElement.focus()}searchClose(){this.searchText="",this.toggleSearch=!1}addCrop(e){this.router.navigateByUrl("/seed-date/"+e.id).then(r=>{})}filterFunction(){return null===this.searchText||""===this.searchText?this.cropsList:this.cropsList.filter(e=>e.cropName.includes(this.searchText))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.F0),t.Y36(d.Ye),t.Y36(b.P),t.Y36(y.r))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-select-crop"]],viewQuery:function(e,r){if(1&e&&t.Gf(O,5),2&e){let i;t.iGM(i=t.CRH())&&(r.searchbar=i.first)}},decls:12,vars:2,consts:[[1,"custom-toolbar"],["mat-icon-button","","aria-label","LeftButton",1,"blue-icon",3,"click"],[1,"toolbar-title"],[1,"toolbar-spacer"],["mat-icon-button","","aria-label","RightButton",1,"blue-icon"],["fxFlexFill","","fxLayout","column","fxLayoutGap","25px","fxLayoutAlign","center center",4,"ngIf"],["class","add-crop","style","overflow-x:hidden;","fxFlexFill","","cdkScrollable","",4,"ngIf"],["fxFlexFill","","fxLayout","column","fxLayoutGap","25px","fxLayoutAlign","center center"],["diameter","100","color","primary"],["fxFlexFill","","cdkScrollable","",1,"add-crop",2,"overflow-x","hidden"],[1,"search-block","mat-elevation-z4"],[2,"padding","0 5px"],["mat-icon-button","","disabled","",1,"search-icon"],["type","text","placeholder","Search",1,"search-control",3,"ngModel","ngModelChange"],["mat-button","","mat-icon-button","",3,"click"],["class","cropsList",4,"ngIf"],[4,"ngIf"],[1,"cropsList"],["cols","2","rowHeight","229","gutterSize","2px",1,"grid"],[4,"ngFor","ngForOf"],[3,"click"],["mat-card-image","",1,"cardImage",3,"src","alt"],[1,"cardTittle"],["mat-card-image","",1,"cardImage",3,"src"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"button",1),t.NdJ("click",function(){return r.handleLeftClick()}),t.TgZ(2,"mat-icon"),t._uU(3,"arrow_back"),t.qZA()(),t.TgZ(4,"span",2),t._uU(5,"Select a crop"),t.qZA(),t._UZ(6,"span",3),t.TgZ(7,"button",4)(8,"mat-icon"),t._uU(9,"volume_up"),t.qZA()()(),t.YNc(10,Z,5,0,"div",5),t.YNc(11,k,12,5,"div",6)),2&e&&(t.xp6(10),t.Q6J("ngIf",r.requestingCrop),t.xp6(1),t.Q6J("ngIf",!r.requestingCrop))},directives:[C.Ye,T.lW,P.Hw,d.O5,p.s9,p.xw,p.SQ,p.Wh,m.$g,L.PQ,C.rD,g.Fj,g.JJ,g.On,x.Il,d.sg,x.DX,u.a8,u.G2,u.rt,u.n5],styles:["header[_ngcontent-%COMP%], .search-block[_ngcontent-%COMP%], .add-crop-header[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:11;transition:all .25s ease-in-out}.cropsList[_ngcontent-%COMP%]{max-width:360px;margin:auto}.add-crop-header.hidden[_ngcontent-%COMP%]{opacity:0}.button[_ngcontent-%COMP%]{text-transform:uppercase}.custom-toolbar[_ngcontent-%COMP%]{background-color:#edf5ff;padding:0 5px}.toolbar-title[_ngcontent-%COMP%]{color:#262626;padding-left:10%}.blue-icon[_ngcontent-%COMP%]{color:#2f4ffe}.search-block[_ngcontent-%COMP%]{width:0;right:0;background:#fff}.search-block.active[_ngcontent-%COMP%]{width:100%}.search-block[_ngcontent-%COMP%]   .search-control[_ngcontent-%COMP%]{flex:1;font-size:1rem;border:0;outline:none;padding-left:10px}.grid[_ngcontent-%COMP%]{margin-top:50px;margin-left:16px;margin-right:16px}mat-card[_ngcontent-%COMP%]{margin:4px;border:2px solid #F5F5F6}.cardImage[_ngcontent-%COMP%]{margin-bottom:0}.cardTittle[_ngcontent-%COMP%]{padding:8px;font-weight:100}[_nghost-%COMP%]     mat-card{flex-grow:1}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]     .toolbar-title{padding-left:0;width:100%;text-align:center}"]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(A)],f.Bz]}),o})();var I=n(6140);let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({}),o})(),Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,v.o9,J,I.q,g.u5,w,m.Cq]]}),o})()}}]);
//# sourceMappingURL=263.90b49eaa6e937f8c.js.map